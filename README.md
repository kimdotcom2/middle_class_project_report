# 중급 프로젝트 개인 보고서

## 프로젝트 개요 및 담당 작업

덕후감은 OCR 기반으로 ISBN을 인식 후 도서 정보를 등록하고 공유하는 도서 정보 데이터베이스 시스템이다.

이 프로젝트의 주요 모듈은 사용자, 도서, 리뷰, 댓글, 대시보드, 알림으로 나뉘어져 있다.

본인은 도서 모듈과 관련 API를 담당하였다.

## 기술 스택

- 언어: Java 17
- 프레임워크: Spring Boot 3
- 빌드 도구: Gradle
- 데이터베이스: H2 Database (개발 및 테스트), PostgreSQL (운영)
- ORM: Spring Data JPA, Querydsl
- 버전 관리: Git, GitHub
- 협업 도구: Discord
- API 문서화: Swagger
- 테스트: JUnit 5, Mockito
- Null Safety: Jspecify, Spring Validation
- 배치: Spring Batch
- 외부 API: 네이버 도서 API, OCR SPACE

Null Safety를 위해 본인은 Jspecify를 도입하는 것에 대해 의견을 내었다.

자바와 스프링에서 컴파일 단계에서 Null Safety를 보장하는 어노테이션은 파편화 되어 있어 일관된 코딩 스타일을 유지하기 어렵다.

Jspecify는 파편화 문제를 해결하기 위해 자바 커뮤니티가 참여하여 비공식적으로 제안한 표준이다.

이미 Spring Framework 6에서 Jspecify를 지원하고 있고, 
공개 예정된 Spring Boot 4에서는 공식적으로 NotNull 어노테이션을 Jspecify로 통일할 예정이다.

## 요구사항

이 모듈의 요구사항은 다음과 같다.

- 도서 정보 등록/수정/삭제
- OCR SPACE를 사용한 ISBN 추출
- 네이버 API를 통한 도서 정보 fetch
- 도서 정보 커서 기반 페이지네이션
- 인기 도서 리스팅

이러한 점을 어필하여 다른 팀원들을 설득했고, 프로젝트에 Jspecify를 도입할 수 있었다.

## 기술적 성과

- TDD(테스트 주도 개발)을 통한 서비스 설계
먼저 단위 테스트 코드를 작성하고 Service 모듈을 작성함으로써 코드를 간결하고 디버깅이 유이하게 작성함

- Querydsl을 사용한 동적 쿼리 구현
2개 이상의 조건이 주어진 요구사항에 맞추어 복잡한 조건에 맞춰 쿼리를 생성하는 Repository 코드 작성함

- 예외 처리 구조화
공통적인 예외 클래스를 구현하고, 이에 맞춰 상황에 커스텀 된 예외 클래스를 구현하고 ControllerAdvice로 처리함으로써 예외 규격을 통일함

## 고민했던 사례

## 배운 점과 개선 사항

- 초기에 DB 구조를 명확히 하고 애플리케이션 개발을 진행해야 한다는 점을 느꼈다.

  논리적 모델링과 엔티티 구현이 끝난 후, 애플리케이션 개발을 진행하면서 조금씩 엔티티 구조를 수정한다는 계획으로 개발을 진행했다.
  하지만 테이블 설계에 연관 관계를 정확히 반영하는 게 부족했기에, JPA를 사용하면서 연관 관계와 관련된 여러 문제가 발생했다.
  그리고 생각했던 것보다 구현에 많은 시간을 썼기에 인덱스 구조를 설계하는 것이 미흡하여 성능 개선이 이루어지지 못했다.
  다음 프로젝트에서는 좀 더 DB 설계에 집중하려고 한다.

- 스프링 프레임워크 내부 동작에 대해 좀 더 자세히 공부해야 겠다고 느꼈다.

특히 JPA에서 영속성 컨텍스트와 엔티티가 동작하는 순서에 대해 깊은 이해가 필요함을 느꼈다.
내가 의도하지 않은 대로 JPA 엔티티가 동작하는 문제를 겪으며 많은 어려움을 겪었다.
다음 프로젝트 전까지 좀 더 JPA에 대한 공부를 할 예정이다.

### 문제 상황

